# BESS-sizing

This code repo develops a battery energy storage system (BESS) sizing optimization framework for commercial customers considering accurate degradation models.

Use “Sizing.ipynb” to perform the sizing process. The input of the module includes the annual load of a building (in an hourly basis). Besides the load information, the users can also specify the desired dispatch algorithm, degradation model, and pricing plan. The algorithm offers three types of pricing plans for selection. Table 1 lists the complete inputs and output.

Table 1: The Inputs and Outputs of the Core Sizing Module
| Input                |                                                                                                                                                                                                                                                                                                                                                                 |
|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Item                 | Description                                                                                                                                                                                                                                                                                                                                                     |
| Annual Building Load | Annual load information of a building in an hourly basis. If there is solar with the building, use negative load when the solar generation exceeds the building load.                                                                                                                                                                                           |
| Dispatch Algorithm   | Select from “global_optim” and “constant_peak”. For users without a MIP solver, “constant_peak” is suggested.                                                                                                                                                                                                                                                   |
| Degradation Model    | Select from “Xu” and “Wang”. Both models provide reasonable estimation of BESS degradation. Xu’s model is recommended for applications with many irregular cycles. Wang’s model is recommended for high C-rate applications. Xu’s model shows slightly more degradations (See Section 3.1).                                                                     |
| Pricing Plans        | Select from “flat”, “demand”, and “energy”. For the “flat” plan, the energy charge and demand charge remain the same throughout the year, regardless of hour of the day or season. The “demand” and “energy” plans are time-of-use plans, in which “demand” has higher on-peak demand charge while “energy” has higher on-peak energy charge (See Section 3.4). |
| Cost of BESS         | The cost of BESS includes battery, power equipment, and construction. Users can tune these parameters in “settings.py”.                                                                                                                                                                                                                                         |
| Output               |                                                                                                                                                                                                                                                                                                                                                                 |
| Item                 | Description                                                                                                                                                                                                                                                                                                                                                     |
| NPVs                 | The net-present values of the selected BESS configurations throughout their lifespans.                                                                                                                                                                                                                                                                          |

The supplementary modules include four major portion, namely 1) dispatch algorithm, 2) degradation models, 3) pricing structure, and 4) settings. 
- The dispatch algorithms are implemented in “dispatch_method.py”. The algorithm takes the annual load as input and output the shaved load with BESS. Users can select from "global_optim" and "constant_peak". Note that the "global_optim" method will require a commercial solver (e.g. Gurobi) to work.
- The degradation models are wrapped in an object Battery within “battery.py”. By simply passing the name of the desired degradation model to the function “degradate”, the BESS will reduce its remaining capacity. Users can select from "Xu" or "Wang".
- The pricing plans are implemented in “pricing.py”, in which an object “PriceSetter” will set the energy and demand charge prices for different time-of-use periods. There are three different types of pricing plans included for now, namely “flat”, “demand”, and “energy”. The energy charge and demand charge remain the same throughout hour of the day and the season for the “flat” rate. Select “demand” or “energy” for time-of-use rates, in which “demand” has higher on-peak demand charge while “energy” has higher on-peak energy charge. The “settings.py” controls the associated costs of BESS, which users can easily change according to the market.
